@(datasets: Page[Dataset])(implicit flash: Flash)
<html>
  <head>
    <title>Pelagios API » Admin » Datasets</title>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/lib/jquery-1.9.0.min.js")"></script>
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/admin/main.css")" />
  </head>
  
  <body>
    <div id="content">
      @flash.get("error").map { message =>
        <h2>Something's wrong with your uploaded file.</h2>
        <div class="error">@Html(message)</div>
      }
      
      @flash.get("success").map { message =>
        <div class="success">@message</div>
      }
      
      <div id="admin-actions">
        <button class="button big upload icon" data-input="upload-void">&#xf093;</button>
        <h4>Upload VoID Dataset Description</h4>
      </div>
    
      @helper.form(action = controllers.admin.routes.DatasetAdminController.uploadDataset(), 'enctype -> "multipart/form-data") {
        <input type="file" id="upload-void" name="void">
      }
      
      <table class="list">
        <thead>
          <tr>
            <th>ID</th>
            <th>Title</th>
            <th>Publisher</th>
            <th>VoID</th>
            <th>Dump File</th>
            <th></th> <!-- Actions -->
          </tr>
        </thead>
        <tbody>
          @for(dataset <- datasets.items) {
          	<tr>
          	  <td><a href="@routes.DatasetController.getDataset(dataset.id)">@dataset.id</a></td>
              <td>@dataset.title</td>
              <td>@dataset.publisher</td>
              <td>
                @if(dataset.voidURI.isDefined) {                	
                  <a class="icon" href="@dataset.voidURI.get">&#xf0c1;</a>
                }
              </td>
              <td>
                <a href="@dataset.datadump">@dataset.datadump</a>
              </td>
              <td class="right">
                @if(dataset.datadump.isDefined) {
                  <button class="button small" title="Fetch from URL">Fetch Data</span></button>
                  <button class="button small" title="Upload RDF Datadump">Upload Data</button>
                }
                <button class="button small red" title="Drop Dataset"><span class="icon">&#xf05e;</span></button>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
    
    @tags.jsUpload()
  </body>
</html>
